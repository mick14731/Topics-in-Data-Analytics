addPolygons(data = data.n,
group = 'base',
fillColor = ~total_popul,
color = 'black',
weight = 1.5)
View(data.n)
View(quakes)
View(outline)
View(data.n)
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
data.n <- data.n[,c("community_n", "total_popul", "geometry")]
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
fill = ~total_popul, weight = 2, color = "#FFFFCC", group = "Outline")
View(data.n)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
polyfill = ~pal()(total_popul),
color = "blue",
group = "base")
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
fill = ~pal()(total_popul),
color = "blue",
group = "base")
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
fillColor = ~total_popul,
color = "blue",
group = "base")
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
fillColor = ~total_popul,
color = "blue",
group = "base",
popup = ~community_n)
View(data.n)
data.n
data.n <- data.n[which(data.n$community_n != "Kingston"),]
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
fillColor = ~total_popul,
color = "blue",
group = "base",
popup = ~community_n)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~total_popul,
color = "blue",
group = "base",
popup = ~community_n)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(total_popul),
color = "blue",
group = "base",
popup = ~community_n)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(total_popul),
color = "blue",
group = "base",
popup = ~community_n)
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$community_n)
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$total_popul)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(),
color = "blue",
group = "base",
popup = ~community_n)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(total_popul),
color = "blue",
group = "base",
popup = ~community_n)
pal <- colorNumeric(
palette = "BuYlRd",
domain = data.n$total_popul)
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$total_popul)
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
View(data.n)
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')
View(neighborhod_area)
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
colnames(neighborhod_area)
colnames(data.n)
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
View(data.n)
data.n$den <- data.n$total_popul/data.n$Geographic.Area
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- data.n$total_popul/data.n$Geographic.Area
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$den)
test <- unite(data.n, col = c("community_n","den"), sep = ": ")
test <- unite(data.n, col = c("community_n","den"), sep = ":")
test <- unite(data.n, col = c("community_n","den"), sep = "-")
test <- unite(data.n, col = c("community_n","den"), sep = " ")
test <- unite(data.n, col = c("community_n","den"), sep = "_")
rlang::last_error()
test <- unite(data.n, col ="Name_density", c("community_n","den"), sep = "_")
View(test)
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- data.n$total_popul/(data.n$Geographic.Area/1000)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
test <- unite(data.n, col ="Name_density", c("community_n","den"), sep = "_")
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
View(test)
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- round(data.n$total_popul/(data.n$Geographic.Area/1000),2)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
test <- unite(data.n, col ="Name_density", c("community_n","den"), sep = "_")
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$den)
View(test)
test <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
View(test)
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$Name_density)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(total_popul),
color = "blue",
group = "base",
popup = ~Name_density)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~Name_density)
data.n <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
View(data.n)
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$Name_density)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~Name_density)
tmp <- st_read("data/transit-gtfs-routes.shp")
data.p <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
data.p <- data.p[,c("route_id", "route_color", "geometry")]
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- round(data.n$total_popul/(data.n$Geographic.Area/1000),2)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
# temp <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
data.n$popup <- paste(data.n$community_n," : ",data.n$den," persons/square km")
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- round(data.n$total_popul/(data.n$Geographic.Area/1000),2)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
# temp <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
data.n$popup <- paste(data.n$community_n," : ",data.n$den," persons/square km")
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "RdYlBu",
domain = data.n$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
pal <- colorNumeric(
palette = "magma",
domain = data.n$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
data.n <- data.n[which(data.n$den >= 1),]
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
data.n_no_sparse <- data.n[which(data.n$den >= 1),]
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n_no_sparse$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 2) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 2,
popup = ~route_id) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- round(data.n$total_popul/(data.n$Geographic.Area/1000),2)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
# temp <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
data.n$popup <- paste(data.n$community_n," : ",data.n$den," persons/square km")
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n$den)
tmp <- st_read("data/transit-gtfs-routes.shp")
data.p <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
data.p <- data.p[,c("route_id", "route_color", "geometry")]
tmp <- st_read("data/neighbourhood-census-profiles-family-housing-mobility.shp")
data.n <- tmp %>%
st_transform(4326) %>%
rmapshaper::ms_simplify()
neighborhod_area <- read.csv("data/neighbourhoods.csv",sep = ';')[,1:4]
data.n <- left_join(data.n,neighborhod_area[,c("Neighbourhood.Identifier","Geographic.Area")], by = c("area_id_num" = "Neighbourhood.Identifier"))
data.n$den <- round(data.n$total_popul/(data.n$Geographic.Area/1000),2)
data.n <- data.n[,c("community_n", "den", "geometry")]
data.n <- data.n[which(data.n$community_n != "Kingston"),]
# temp <- unite(data.n, col ="Name_density", c("community_n","den"), sep = " : ")
data.n$popup <- paste(data.n$community_n," : ",data.n$den," persons/square km")
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 1.5) %>%
addPolygons(data = data.n,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
# Exclude rural
data.n_no_sparse <- data.n[which(data.n$den >= 0.75),]
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n_no_sparse$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 2,
popup = ~route_id) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 2,
popup = ~paste("route: ",route_id)) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
data.n_no_sparse <- data.n[which(data.n$den >= 0.5),]
lng.center <- -76.55
lat.center <- 44.23283
zoom.def <- 12
pal <- colorNumeric(
palette = "magma",
domain = data.n_no_sparse$den)
leaflet(data = data.p) %>%
addProviderTiles("OpenStreetMap.Mapnik", options = providerTileOptions(opacity = 1), group = "Open Street Map") %>%
setView(lng = lng.center, lat = lat.center, zoom = zoom.def) %>%
addPolylines(group = 'base',
fillColor = 'transparent',
color = "black",
weight = 2,
popup = ~paste("route: ",route_id)) %>%
addPolygons(data = data.n_no_sparse,
weight = 1,
fillColor = ~pal(den),
color = "blue",
group = "base",
popup = ~popup)
